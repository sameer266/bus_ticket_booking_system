{% extends 'components/base.html' %}
{% block title %}Vehicle Reservations | Go Sewa{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="row g-0">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 d-md-block sidebar collapse" id="sidebarMenu">
            {% include 'components/sidebar.html' %}
        </div>
        <!-- Main Content -->
        <main class="mt-5 col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4 main-content">

            <!-- Messages --> 
            {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show mt-2" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
            {% endif %}

            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-4 border-bottom">
                <h1 class="h2 fw-bold">
                    <i class="bi bi-car-front me-2 text-primary"></i>Vehicle Reservations
                </h1>
                <div class="btn-toolbar d-none d-md-flex">
                    <div class="btn-group me-2">
                        <button id="addReservationBtn" class="btn btn-sm btn-primary">
                            <i class="bi bi-plus-lg me-1"></i> Add Vehicle
                        </button>
                        <a href="{% url 'vehicle_type_list' %}" class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-list-check me-1"></i> Manage Types
                        </a>
                    </div>
                </div>
            </div>

            <!-- Advanced Filter Card -->
            <div class="card shadow-sm mb-4 border">
                <div class="card-header bg-light py-3">
                    <h5 class="mb-0 fw-bold text-primary">
                        <i class="bi bi-funnel me-2"></i>Filters
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-6 col-lg-3">
                            <label class="form-label">Search</label>
                            <div class="input-group">
                                <span class="input-group-text bg-light"><i class="bi bi-search"></i></span>
                                <input type="text" class="form-control" id="searchInput" placeholder="Vehicle name, number...">
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <label class="form-label">Source</label>
                            <select class="form-select" id="sourceFilter">
                                <option value="">All Sources</option>
                                {% for i in source %}
                                <option value="{{i}}">{{i}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <label class="form-label">Type</label>
                            <select class="form-select" id="typeFilter">
                                <option value="">All Types</option>
                                {% for i in vechicle_types %}
                                <option value="{{i.name}}">{{i.name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="statusFilter">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12 d-flex justify-content-end">
                            <button id="resetFilters" class="btn btn-sm btn-outline-secondary me-2">
                                <i class="bi bi-arrow-counterclockwise me-1"></i> Reset
                            </button>
                            <button id="applyFilters" class="btn btn-sm btn-primary">
                                <i class="bi bi-funnel me-1"></i> Apply Filters
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reservations Card -->
            <div class="card shadow-sm border">
                <div class="card-header bg-light py-3 d-flex justify-content-between align-items-center flex-wrap gap-2">
                    <h5 class="mb-0 fw-bold text-primary">
                        <i class="bi bi-car-front me-2"></i>Vehicle Reservation List
                    </h5>
                    <div class="d-flex gap-2">
                       
                        <button class="btn btn-sm btn-outline-primary d-md-none" id="mobileAddReservationBtn">
                            <i class="bi bi-plus-lg"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 classic-table" id="reservationsTable">
                            <thead class="table-light">
                                <tr>
                                    <th class="ps-3">Vehicle</th>
                                    <th class="d-none d-md-table-cell">Type</th>
                                    <th class="d-none d-lg-table-cell">Number</th>
                                    <th class="d-none d-xl-table-cell">Model</th>
                                    <th class="text-center">Seats</th>
                                    <th class="d-none d-lg-table-cell">Color</th>
                                    <th class="d-none d-xl-table-cell">Price</th>
                                    <th class="d-none d-xl-table-cell">Driver</th>
                                    <th class="d-none d-xl-table-cell">Staff</th>
                                    <th class="d-none d-xl-table-cell">Source</th>
                                    <th class="text-end pe-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for reservation in reservations %}
                                <tr data-reservation-id="{{ reservation.id }}" 
                                    data-type="{{ reservation.type.name|default:'-' }}" 
                                    data-source="{{ reservation.source }}"
                                    data-status="active">
                                    <td class="ps-3">
                                        <div class="d-flex align-items-center gap-2">
                                            {% if reservation.image %}
                                            <img src="{{ reservation.image.url }}" class="rounded" style="width: 40px; height: 40px; object-fit: cover;" alt="{{ reservation.name }}">
                                            {% else %}
                                            <div class="avatar bg-secondary text-white d-flex align-items-center justify-content-center rounded" style="width: 40px; height: 40px;">
                                                <i class="bi bi-car-front"></i>
                                            </div>
                                            {% endif %}
                                            <div class="overflow-hidden">
                                                <h6 class="mb-0 text-truncate">{{ reservation.name }}</h6>
                                                <small class="text-muted d-md-none text-truncate">
                                                    {{ reservation.type.name|default:"-" }} â€¢ {{ reservation.vechicle_number }}
                                                </small>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <span class="badge bg-primary bg-opacity-10 text-primary">
                                            {{ reservation.type.name|default:"-" }}
                                        </span>
                                    </td>
                                    <td class="d-none d-lg-table-cell">{{ reservation.vechicle_number }}</td>
                                    <td class="d-none d-xl-table-cell">{{ reservation.vechicle_model|default:"-" }}</td>
                                    <td class="text-center">{{ reservation.total_seats }}</td>
                                    <td class="d-none d-lg-table-cell">
                                        <span class="color-badge" style="background-color: {{ reservation.color|default:'#6c757d' }};">
                                            {{ reservation.color|default:"N/A" }}
                                        </span>
                                    </td>
                                    <td class="d-none d-xl-table-cell text-nowrap">
                                        {% if reservation.price %}
                                        Rs {{ reservation.price|floatformat:2 }}
                                        {% else %}
                                        -
                                        {% endif %}
                                    </td>
                                    <td class="d-none d-xl-table-cell">
                                        {% if reservation.driver %}
                                        <span class="badge bg-info bg-opacity-10 text-dark">
                                            {{ reservation.driver.full_name }}
                                        </span>
                                        {% else %}
                                        -
                                        {% endif %}
                                    </td>
                                    <td class="d-none d-xl-table-cell">
                                        {% if reservation.staff %}
                                        <span class="badge bg-info text-dark">
                                            {{ reservation.staff.full_name }}
                                        </span>
                                        {% else %}
                                        -
                                        {% endif %}
                                    </td>
                                    <td class="d-none d-xl-table-cell">
                                        <span class="badge bg-light text-dark">{{ reservation.source }}</span>
                                    </td>
                                    <td class="text-end pe-3">
                                        <div class="d-flex gap-2 justify-content-end">
                                            <a href="{% url 'vehicle_reservation_edit' reservation.id %}" 
                                               class="btn btn-sm btn-outline-primary" 
                                               title="Edit">
                                                <i class="bi bi-pencil-square"></i>
                                            </a>
                                            <a href="{% url 'delete_vehicle_reservation' reservation.id %}" 
                                               class="btn btn-sm btn-outline-danger delete-reservation-btn"
                                               title="Delete">
                                                <i class="bi bi-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="11" class="text-center py-5">
                                        <i class="bi bi-car-front display-5 text-muted mb-3"></i>
                                        <h5 class="text-muted">No reservations found</h5>
                                        <button id="emptyAddReservationBtn" class="btn btn-primary mt-2">
                                            <i class="bi bi-plus-circle me-1"></i> Add Reservation
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                {% if reservations.has_other_pages %}
                <div class="card-footer bg-light">
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center mb-0">
                            {% if reservations.has_previous %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ reservations.previous_page_number }}" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            {% else %}
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            {% endif %}
                            
                            {% for i in reservations.paginator.page_range %}
                            {% if reservations.number == i %}
                            <li class="page-item active" aria-current="page">
                                <a class="page-link" href="#">{{ i }}</a>
                            </li>
                            {% else %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                            </li>
                            {% endif %}
                            {% endfor %}
                            
                            {% if reservations.has_next %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ reservations.next_page_number }}" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            {% else %}
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </div>
                {% endif %}
            </div>
        </main>
    </div>
</div>

<!-- Add Reservation Modal -->
<div class="modal fade" id="addReservationModal" tabindex="-1" aria-labelledby="addReservationModalLabel" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="addReservationModalLabel"><i class="bi bi-car-front me-2"></i>Add New Vehicle</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{% url 'vehicle_reservation' %}" id="addReservationForm" enctype="multipart/form-data" class="needs-validation" novalidate>
                    {% csrf_token %}
                    <input type="hidden" name="add_reservation" value="1">
                    <div class="row row-cols-1 row-cols-md-2 g-3">
                        <div class="col-md-6">
                            <label class="form-label">Name*</label>
                            <input type="text" class="form-control" name="name" placeholder="Vehicle Name" required>
                            <div class="invalid-feedback">Please provide a vehicle name.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Type*</label>
                            <select class="form-select" name="type" required>
                                <option value="">-- Select Type --</option>
                                {% for vechicle_type in vechicle_types %}
                                <option value="{{ vechicle_type.id }}">{{ vechicle_type.name }}</option>
                                {% endfor %}
                            </select>
                            <div class="invalid-feedback">Please select a vehicle type.</div>
                        </div>
                        
                        <div class="col-md-6">
                            <label class="form-label">Vehicle Number*</label>
                            <input type="text" class="form-control" name="vechicle_number" placeholder="BA 1-2345" required>
                            <div class="invalid-feedback">Please provide a vehicle number.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Vehicle Model*</label>
                            <input type="text" class="form-control" name="vechicle_model" placeholder="e.g., Toyota HiAce">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Image</label>
                            <input type="file" class="form-control" name="image" accept="image/*">
                            <small class="text-muted">Recommended size: 500x500px</small>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Document</label>
                            <input type="file" class="form-control" name="document" accept="image/*, .pdf">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Color</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="color" placeholder="e.g., White" id="colorText">
                                <input type="color" class="form-control form-control-color" id="colorPicker" style="width: 40px;" title="Choose color">
                            </div>
                            <div class="mt-2">
                                <span class="color-preview d-inline-block" id="colorPreview">&nbsp;</span>
                                <small class="text-muted ms-2">Preview</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Driver*</label>
                            <select class="form-select" name="driver_id" required>
                                <option value="">-- Select Driver --</option>
                                {% for driver in unassigned_drivers %}
                                <option value="{{ driver.id }}">{{ driver.full_name }}</option>
                                {% endfor %}
                            </select>
                            <div class="invalid-feedback">Please select a driver.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Staff</label>
                            <select class="form-select" name="staff_id">
                                <option value="">-- Select Staff --</option>
                                {% for staff in unassigned_staff %}
                                <option value="{{ staff.id }}">{{ staff.full_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Source*</label>
                            <select class="form-select" name="source" required>
                                <option value="">-- Select Source --</option>
                                {% for src in source %}
                                <option value="{{ src }}">{{ src }}</option>
                                {% endfor %}
                            </select>
                            <div class="invalid-feedback">Please select a source.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Total Seats*</label>
                            <input type="number" class="form-control" name="total_seats" value="35" min="1" required>
                            <div class="invalid-feedback">Please provide valid seat count.</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Price (Rs)*</label>
                            <div class="input-group">
                                <span class="input-group-text">Rs</span>
                                <input type="number" class="form-control" name="price" placeholder="5000" step="0.01" required>
                            </div>
                            <div class="invalid-feedback">Please provide a valid price.</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="addReservationForm" class="btn btn-primary">
                    <i class="bi bi-plus-circle me-1"></i> Add Vehicle
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" data-bs-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="deleteConfirmModalLabel"><i class="bi bi-exclamation-triangle-fill me-2"></i>Confirm Delete</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center mb-4">
                    <i class="bi bi-exclamation-triangle display-4 text-danger"></i>
                </div>
                <p>Are you sure you want to delete this vehicle reservation? This action cannot be undone.</p>
                <p class="fw-bold text-center" id="deleteReservationName"></p>
                <div class="alert alert-warning mt-3">
                    <i class="bi bi-info-circle me-2"></i>Deleting this vehicle will also remove all associated bookings.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <form method="POST" id="deleteReservationForm" action="">
                    {% csrf_token %}
                    <input type="hidden" name="delete_reservation" value="1">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash me-1"></i> Delete
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

{% block extra_css %}
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .sidebar {
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        background-color: #fff;
        transition: all 0.3s;
        border-right: 1px solid #dee2e6;
    }
    .main-content {
        background-color: #f8f9fa;
    }
    
    /* Classic UI Table Styles */
    .classic-table {
        border-collapse: collapse;
    }
    .classic-table thead th {
        background-color: #f2f2f2;
        border-bottom: 2px solid #dee2e6;
        font-weight: 600;
        color: #333;
    }
    .classic-table tbody tr {
        border-bottom: 1px solid #e9ecef;
    }
    .table-hover tbody tr:hover {
        background-color: rgba(13, 110, 253, 0.05);
        transition: all 0.2s;
    }
    
    /* Updated Color Badge */
    .color-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: 500;
        color: white;
        text-shadow: 0 0 2px rgba(0,0,0,0.7);
    }
    
    /* Color Preview in Form */
    .color-preview {
        width: 80px;
        height: 24px;
        border-radius: 4px;
        border: 1px solid #dee2e6;
    }
    
    .badge {
        font-weight: 500;
        padding: 0.35em 0.65em;
    }
    .avatar {
        font-size: 1.2rem;
    }
    
    /* Card Updates */
    .card {
        border-radius: 6px;
        border: 1px solid #dee2e6;
    }
    .card-header {
        border-bottom: 1px solid #dee2e6;
    }
    
    /* Button Styles */
    .btn {
        border-radius: 4px;
    }
    .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }
    .btn-primary:hover {
        background-color: #0b5ed7;
        border-color: #0a58ca;
    }
    
    /* Form Styles */
    .form-control, .form-select {
        border-radius: 4px;
        border: 1px solid #ced4da;
    }
    .form-control:focus, .form-select:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
    
    /* Dropdown Menu */
    .dropdown-menu {
        border-radius: 4px;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        border: 1px solid #dee2e6;
    }
    
    @media (max-width: 767.98px) {
        .table-container {
            margin-left: 0;
        }
        .sidebar {
            position: static;
            height: auto;
        }
        .table td, .table th {
            padding: 0.5rem;
        }
    }
    @media (max-width: 1199.98px) {
        .table td, .table th {
            white-space: nowrap;
        }
    }
    /* Color for status badges */
    .badge.bg-active {
        background-color: #19875420;
        color: #198754;
    }
    .badge.bg-inactive {
        background-color: #dc354520;
        color: #dc3545;
    }
</style>
{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    // Initialize modals
    const addReservationModal = new bootstrap.Modal('#addReservationModal');
    const deleteConfirmModal = new bootstrap.Modal('#deleteConfirmModal');
    
    // Show Add Reservation Modal
    $('#addReservationBtn, #emptyAddReservationBtn, #mobileAddReservationBtn').click(function(e) {
        e.preventDefault();
        addReservationModal.show();
    });
    
    // Delete confirmation handling
    $('.delete-reservation-btn').click(function(e) {
        e.preventDefault();
        const reservationName = $(this).closest('tr').find('h6').text();
        $('#deleteReservationName').text(reservationName);
        $('#deleteReservationForm').attr('action', $(this).attr('href'));
        deleteConfirmModal.show();
    });
    
    // Form validation
    (function() {
        'use strict';
        var forms = document.querySelectorAll('.needs-validation');
        Array.prototype.slice.call(forms).forEach(function(form) {
            form.addEventListener('submit', function(event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    })();
    
    // Advanced filtering
    $('#applyFilters').click(function() {
        const searchTerm = $('#searchInput').val().toLowerCase();
        const sourceFilter = $('#sourceFilter').val();
        const typeFilter = $('#typeFilter').val();
        const statusFilter = $('#statusFilter').val();
        
        $('#reservationsTable tbody tr').each(function() {
            const $row = $(this);
            const name = $row.find('h6').text().toLowerCase();
            const type = $row.data('type');
            const source = $row.data('source');
            const status = $row.data('status');
            
            const matchesSearch = searchTerm === '' || name.includes(searchTerm) || 
                                $row.find('td:nth-child(3)').text().toLowerCase().includes(searchTerm);
            const matchesSource = sourceFilter === '' || source === sourceFilter;
            const matchesType = typeFilter === '' || type === typeFilter;
            const matchesStatus = statusFilter === '' || status === statusFilter;
            
            if (matchesSearch && matchesSource && matchesType && matchesStatus) {
                $row.show();
            } else {
                $row.hide();
            }
        });
    });
    
    // Reset filters
    $('#resetFilters').click(function() {
        $('#searchInput, #sourceFilter, #typeFilter, #statusFilter').val('');
        $('#reservationsTable tbody tr').show();
    });
    
    // Color picker integration
    $('#colorPicker').change(function() {
        const color = $(this).val();
        $('#colorText').val(color);
        $('#colorPreview').css('background-color', color);
    });
    
    // Initialize color preview
    $('#colorPicker').on('input', function() {
        const color = $(this).val();
        $('#colorPreview').css('background-color', color);
    });
    
    $('#colorText').on('input', function() {
        const color = $(this).val();
        if (color.match(/^#[0-9A-F]{6}$/i) || color.match(/^rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\)$/i)) {
            $('#colorPreview').css('background-color', color);
            $('#colorPicker').val(color);
        }
    });

    // Quick search on input change with debounce
    let searchTimeout;
    $('#searchInput').on('input', function() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            $('#applyFilters').click();
        }, 300);
    });

    // Source and type filter change
    $('#sourceFilter, #typeFilter, #statusFilter').change(function() {
        $('#applyFilters').click();
    });

    // Make table rows clickable (except for action areas)
    $('#reservationsTable tbody tr').click(function(e) {
        if (!$(e.target).is('button, a, input, .dropdown, .dropdown *')) {
            const reservationId = $(this).data('reservation-id');
            if (reservationId) {
                window.location.href = `/vehicle-reservation-detail/${reservationId}/`;
            }
        }
    }).css('cursor', 'pointer');

    // Responsive table adjustments
    function adjustTableForMobile() {
        if ($(window).width() < 768) {
            $('.table-responsive').addClass('table-responsive-sm');
        } else {
            $('.table-responsive').removeClass('table-responsive-sm');
        }
    }

    // Initialize color preview on modal show
    $('#addReservationModal').on('shown.bs.modal', function() {
        const initialColor = $('#colorText').val() || '#6c757d';
        $('#colorPreview').css('background-color', initialColor);
    });

    // Initialize status badges
    $('[data-status="active"]').find('.status-badge').addClass('bg-active');
    $('[data-status="inactive"]').find('.status-badge').addClass('bg-inactive');

    $(window).resize(adjustTableForMobile);
    adjustTableForMobile();

    // Export functionality
    $('.dropdown-item').click(function(e) {
        e.preventDefault();
        const format = $(this).find('i').attr('class').split('-')[1];
        alert(`Exporting to ${format.toUpperCase()} format would happen here`);
    });

    // Initialize tooltips
    $('[data-bs-toggle="tooltip"]').tooltip();

    // Show loading state when submitting forms
    $('#addReservationForm, #deleteReservationForm').submit(function() {
        $(this).find('button[type="submit"]').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Processing...').prop('disabled', true);
    });
});
</script>
{% endblock %}
{% endblock %}